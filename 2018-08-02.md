---
title:    C++ Club Meeting Notes
author:   Gleb Dolgich
date:     2018-08-02
---

# Follow-up: Four Habit-Forming Tips to Faster C++

[Post by KDAB](https://www.kdab.com/four-habit-forming-tips-faster-c/)

"Cache member-variables and reference-parameters"

The original version in the article doesn't even work without aliasing:

```cpp
template<typename T>
class complex {
    complex& operator*=(const complex<T>& a) {
        real = real * a.real - imag * a.imag;
        // BUG: real is changed, then used in subsequent calculation
        imag = real * a.imag + imag * a.real;
        return *this;
    }
};
```

# Follow-up: Four Habit-Forming Tips to Faster C++ (cont.)

[Post by KDAB](https://www.kdab.com/four-habit-forming-tips-faster-c/)

"Cache member-variables and reference-parameters"

The recommended version from the article:

```cpp
template<typename T>
class complex {
    complex& operator*=(const complex<T>& a) {
        T a_real = a.real, a_imag = a.imag;
        T t_real = real, t_imag = imag;
        real = t_real * a_real - t_imag * a_imag;
        imag = t_real * a_imag + t_imag * a_real;
        return *this;
    }
};
```

# Follow-up: Four Habit-Forming Tips to Faster C++ (cont.)

[Post by KDAB](https://www.kdab.com/four-habit-forming-tips-faster-c/)

"Cache member-variables and reference-parameters"

Proposed "economy" version:

```cpp
template<typename T>
class complex {
    complex& operator*=(const complex<T>& a) {
        auto real_this{real}; // modified by our code
        auto real_a{a.real}; // may be modified if aliased
        real = real * a.real - imag * a.imag;
        imag = real_this * a.imag + imag * real_a;
        return *this;
    }
};
```

# Follow-up: Four Habit-Forming Tips to Faster C++ (cont.)

[Post by KDAB](https://www.kdab.com/four-habit-forming-tips-faster-c/)

"Cache member-variables and reference-parameters"

Proposed "easy" version:

```cpp
template<typename T>
class complex {
    complex& operator*=(complex<T> a) {
        auto self{*this};
        real = self.real * a.real - self.imag * a.imag;
        imag = self.real * a.imag + self.imag * a.real;
        return *this;
    }
};
```

# Expect the Expected, by Andrei Alexandrescu

* [Video](https://youtu.be/nVzgkepAg5Y)
* [Reddit](https://www.reddit.com/r/cpp/comments/8zwzv0/expect_the_expected_andrei_alexandrescu/)
* [Howard Hinnant on how to initialize a class using delegating constructors](https://stackoverflow.com/questions/38780596/how-to-handle-constructors-that-must-acquire-multiple-resources-in-an-exception#38780597)

# Modules TS example

[Post](https://schneide.blog/2017/07/09/c-modules-example/)

# C++17: `std::apply`

* [CppReference](http://en.cppreference.com/w/cpp/utility/apply)

# C++17 in libsigc++ : `invoke`, `apply`, and `constexpr if`

* [Post](https://www.murrayc.com/permalink/2018/04/15/c17-in-libsigc-invoke-apply-and-constexpr-if/)
* [Code](https://github.com/libsigcplusplus/libsigcplusplus) (LGPL)
* [Docs](https://libsigcplusplus.github.io/libsigcplusplus/)

libsigc++ implements a typesafe callback system for standard C++. It allows you to define signals and to connect those signals to any callback function, either global or a member function, regardless of whether it is static or virtual.

# Unity ("jumbo") builds

AKA: amalgamated, or Single Compilation Unit (SCU) builds.

* [A Guide to Unity Builds by Viktor Kirilov](http://onqtam.com/programming/2018-07-07-unity-builds/)
* [Support for Unity (Jumbo) Files in Visual Studio 2017 15.8 (Experimental)](https://blogs.msdn.microsoft.com/vcblog/2018/07/02/support-for-unity-jumbo-files-in-visual-studio-2017-15-8-experimental/)
* [Chromium instructions](https://chromium.googlesource.com/chromium/src/+/lkcr/docs/jumbo.md) and [GoogleDoc](https://docs.google.com/document/d/19jGsZxh7DX8jkAKbL1nYBa5rcByUL2EeidnYsoXfsYQ/edit)
* [Reddit](https://www.reddit.com/r/cpp/comments/8wusdi/everything_about_unity_builds_a_highly_underrated/)
* Other tools:
    * CMake [cotire](https://github.com/sakra/cotire) and [Unity Build macro](http://kecsapblog.blogspot.com/2016/03/unity-build-macro-for-cmake.html)
    * [FASTBuild](http://www.fastbuild.org/docs/functions/unity.html)
    * [Meson](http://mesonbuild.com/Unity-builds.html#unity-builds)
    * [waf](https://gitlab.com/ita1024/waf/blob/master/waflib/extras/unity.py)
    * [RudeBuild plugin for Visual Studio](https://marketplace.visualstudio.com/items?itemName=Trass3r.RudeBuild)

# `const auto*` versus `const auto` for Pointer Types

[Article](http://www.nuonsoft.com/blog/2018/07/06/const-auto-versus-const-auto-for-pointer-types/)

# Variadic CRTP

* [Steve Dewhurst](http://stevedewhurst.com/once_weakly/once-weakly20170328/once-weakly20170328.pdf)
* [Jonathan Boccara](https://www.fluentcpp.com/2018/06/22/variadic-crtp-opt-in-for-class-features-at-compile-time/)
    * [Reddit thread](https://www.reddit.com/r/cpp/comments/8szpia/variadic_crtp_an_optin_for_class_features_at/)

# Qt and the Coroutines TS

* [Post by Jeff Trull](http://jefftrull.github.io/qt/c++/coroutines/2018/07/21/coroutines-and-qt.html)
* [Post by Jesús Fernández](http://blog.qt.io/blog/2018/05/29/playing-coroutines-qt/)
* [Boost.Asio coroutine support](https://www.boost.org/doc/libs/1_67_0/doc/html/boost_asio/overview/core/coroutines_ts.html)
* [Coroutine Theory Series, by Lewis Baker](https://lewissbaker.github.io/2017/09/25/coroutine-theory)
* [cppcoro: Coroutine Utilities, by Lewis Baker](https://github.com/lewissbaker/cppcoro)
* [How Coroutines Work, by Kirit Sælensminde](https://kirit.com/How%20C%2B%2B%20coroutines%20work)

# Twitter

![](img/cargo-cult.png)
