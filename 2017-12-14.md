---
title:    C++ Club Meeting Notes
author:   Gleb Dolgich
date:     2017-12-14
---

# Intel offers Parallel STL implementation to GNU libstdc++ and libc++

"The implementation is not specific to Intel’s hardware. For thread-level parallelism it uses [TBB](https://www.threadingbuildingblocks.org/) but abstracts it with an internal API which can be implemented on top of other threading/parallel solutions -- so it is for the community to decide which ones to use. For SIMD parallelism (`unseq`, `par_unseq`) we use `#pragma omp simd` directives; it is vendor-neutral and does not require any OpenMP runtime support."

* [Reddit](https://www.reddit.com/r/cpp/comments/7gjmgd/intel_offers_parallel_stl_implementation_to_gnu/)
* [libstdc++ RFC email](https://gcc.gnu.org/ml/libstdc++/2017-11/msg00112.html)
* [ICC for open source](https://software.intel.com/en-us/qualify-for-free-software/opensourcecontributor)

# Functional exceptionless error handling with `optional` and `expected`

[Article by Simon Brand](https://blog.tartanllama.xyz/optional-expected/) -- [Reddit thread](https://www.reddit.com/r/cpp/comments/7gua48/functional_exceptionless_errorhandling_with/)

* Makes a case against exceptions by (incorrectly) using them as a negative result of a function.
* Discusses `std::optional` and the proposed `std::expected` ([p0323r3](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/p0323r3.pdf)) but argues that error checking with these is still very 'noisy'.
* Proposes `.map()` and `.and_then()` functions (Haskell equivalents are `fmap` and `bind`, or `>>=`).
* See also: [Functors, Applicatives, and Monads in Pictures](http://adit.io/posts/2013-04-17-functors,_applicatives,_and_monads_in_pictures.html) by Aditya Bhargava.
* Related proposal: [p0834r0
Lifting overload sets into objects](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/p0834r0.html) by Michał Dominiak.

# Functional exceptionless error handling with `optional` and `expected` (cont.)

Reddit:

> Exceptions make sense when you actually need to unwind the call stack, because the only reasonable course of action is to ditch what you're working on and have something far up the call stack handle the failure.

> They do not make sense when there is a reasonable way to recover, and the failure is likely to happen in normal usage.

'Exceptionless' isn't strictly true if memory is allocated in the chain of calls. (But that's probably OK. -- *GD*)

Related to sum types discussion: [Mach7 pattern matching library](https://github.com/solodon4/Mach7)

# C++ Monadic Interface, by Vicente J. Botet Escribá

[p0650r1](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/p0650r1.pdf)

```
functor::transform : [T] x (T->U) -> [U]
functor::map : (T->U) x [T] -> [U]
applicative::ap : [T] x [(T->U)] -> [U]
applicative::pure<A> : T -> [T]
monad::unit<A> : T -> [T]
monad::bind : [T] x (T->[U]) -> [U] //mbind
monad::unwrap : [[T]] -> [T] // unwrap
monad::compose : (B->[C]) x (A->[B])-> (A->[C])
monad_error::make_error<M>: E -> error_type_t<M,E>
monad_error::catch_error: [T] x (E->T) -> [T]
                          where E = error_type_t<[T]>
monad_error::catch_error: [T] x (E->[T]) -> [T]
```

# Operator try, by Niall Douglas

[p0779r0](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/p0779r0.pdf)

Proposes `operator try` as it is used in [Swift](https://developer.apple.com/library/content/documentation/Swift/Conceptual/Swift_Programming_Language/ErrorHandling.html) and [Rust](https://doc.rust-lang.org/std/macro.try.html).

With C++ exception handling, the points at which control flow can change are invisible. This is not the case with Expected|Outcome code where the programmer must explicitly annotate each potential control flow change point with either explicit `if` logic, or a `try`.

Facebook's *Folly* abused `co_await` by using it with `folly::optional` to check for presence of a value.

The author ends up proposing language injection feature, i.e. compile-time programming, and maybe even metaclass-like functionality.

(Another proposal developed in isolation that doesn't consider other existing proposals.)

# ComputeCpp 0.5.0 and SYCL 1.2.1

* [Blog post by Codeplay](https://codeplay.com/portal/12-06-17-computecpp-ce-0-5-0-released-and-sycl-1-2-1-ratified)
* [Download](https://developer.codeplay.com/)
* SYCL is used in machine learning. ComputeCpp, Codeplay's implementation of the SYCL standard can already be used to execute TensorFlow applications on SPIR OpenCL supported hardware.
* An ARM release of ComputeCpp is also now available and allows developers to target a range of embedded processors using SYCL.

# CUTLASS by NVIDIA

Today, we are introducing a preview of CUTLASS (CUDA Templates for Linear Algebra Subroutines), a collection of CUDA C++ templates and abstractions for implementing high-performance GEMM computations at all levels and scales within CUDA kernels.

* [Announcement](https://devblogs.nvidia.com/parallelforall/cutlass-linear-algebra-cuda/)
* [GitHub](https://github.com/NVIDIA/cutlass) (BSD-3-Clause)

# HPX on a RasPI cluster

* [Slides](http://reu.cct.lsu.edu/documents/2017-presentations/Goncalves-Presentation.pdf)

# CppCon 2017: Juan Arrieta “Traveling the Solar System with C++: Programming Rocket Science”

[YouTube](https://www.youtube.com/watch?v=YXs3DFrZZL4)

# Clipp: command-line argument handler

Easy to use, powerful and expressive command line argument handling for C++11/14/17 contained in a single header file.

* [GitHub](https://github.com/muellan/clipp) (MIT)

# Compile-time String Obfuscator

[GitHub](https://github.com/urShadow/StringObfuscator) (C++14) (MIT)

```cpp
#include <iostream>
#include "str_obfuscator.hpp"

int main(void)
{
  std::cout << cryptor::create("Hello, World!").decrypt()
            << "\n";
  return 0;
}
```

# Vc: SIMD Vector Classes for C++ by Matthias Kretz

* [GitHub](https://github.com/VcDevel/Vc) (C++14) (BSD-3-Clause)
* [P0214R7: Data-Parallel Vector Types & Operations](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/p0214r7.pdf)

# libbson: A BSON utility library by MongoDB

* [GitHub](https://github.com/mongodb/libbson) (Apache-2.0)

# C++ poetry

[Reddit](https://www.reddit.com/r/cpp/comments/7crald/a_c_poem/)

```cpp
void spanish_inquisition() noexcept
{
    throw std::unexpected;
}
```

# Variadic CRTP by Steve Dewhurst

[PDF](http://stevedewhurst.com/once_weakly/once-weakly20170328/once-weakly20170328.pdf)

# "Making new friends" idiom by Dan Saks

[Wikibooks](https://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Making_New_Friends)

> The goal is to simplify creation of friend functions for a class template.

```cpp
template<typename T>
class Foo {
   T value;
public:
   Foo(const T& t) { value = t; }
   friend ostream& operator <<(ostream& os, const Foo<T>& b)
   {
      return os << b.value;
   }
};
```
