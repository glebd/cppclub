---
title:    C++ Club Meeting Notes
author:   Gleb Dolgich
date:     2018-10-11
---

# Deterministic Disappointment, by Niall Douglas (1/4)

* [Video](https://youtu.be/cbUTAoHy6Ls)
    - Example of a poorly-designed file system API
    - Illustration of how expensive is to allocate memory
    - History of C++ exceptions
    - Throwing/catching is approximately 300 times slower than other error handling mechanisms
    - Many code bases ban exceptions (high maintenance costs)
    - Explanation of C++ `<system_error>` and how it is used wrong everywhere
        + [P1028: SG14 `status_code` and standard error object](http://wg21.link/p1028) is better
* [Slides](https://docs.google.com/presentation/d/1fSkpD51FKmy8VEO9P86jWN6tOEaBmzHOXo14zLRkFKE/edit#slide=id.p)
* [Niall's proposal N2289/P1095](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n2289.pdf)
* [Herb Sutter's proposal P0709](http://wg21.link/p0709)

# Deterministic Disappointment, by Niall Douglas (2/4)

## Let's add exceptions to C (and Rust/Go/Python etc.)!

* If a C function is marked with `fails(E)` its calling convention changes to return `union` of return type `T` and error type `E`.
* Discriminant is lightweight and architecture-specific
* Fails-functions must be explicitly called with `catch(...)` or `try(...)`
* `fails_errno` is a boilerplate expansion and solves the global `errno` problem

# Deterministic Disappointment, by Niall Douglas (3/4)

## C++

* Functions can be marked with:
    - `throws`
    - `throws(E)`
    - `fails(E)`
    - `noexcept`
    - nothing

# Deterministic Disappointment, by Niall Douglas (4/4)

* One possible implementation of [P0709](http://wg21.link/p0709)
* Solves a few long-standing problems in C and POSIX
* Enables C code to call C++ code without exception translation wrappers (also Rust, Go, Python etc.)
* C++ can send/get exceptions to/from C

# Pointer-to-member-functions can be tricky

* [Post](http://www.elbeno.com/blog/?p=1575)
* [Snippet](https://godbolt.org/z/-juwda)
* [Raymond Chen: Pointers to member functions are very strange animals](https://blogs.msdn.microsoft.com/oldnewthing/20040209-00/?p=40713)

# Prepare thy Pitchforks: A De-facto Standard Project Layout

* [Early Reddit post](https://www.reddit.com/r/cpp/comments/996q8o/prepare_thy_pitchforks_a_de_facto_standard/)
* [Later Reddit post](https://www.reddit.com/r/cpp/comments/9eq46c/pitchforks_part_ii_project_layout_and_naming/)
* [Blog post](https://vector-of-bool.github.io/2018/09/16/layout-survey.html)
* [GitHub repo](https://github.com/vector-of-bool/pitchfork/blob/spec/data/spec.bs)

# Exploring C++ types with `puts(__PRETTY_FUNCTION__)`

* [Post](https://quuxplusone.github.io/blog/2018/08/22/puts-pretty-function/)
    - [Reddit](https://www.reddit.com/r/cpp/comments/99huzd/exploring_c_types_with_puts_pretty_function/)
    - [boost::core::typeinfo](https://www.boost.org/doc/libs/1_68_0/libs/core/doc/html/core/typeinfo.html)

```cpp
template<class T>
void f() {
    puts(__PRETTY_FUNCTION__); // __FUNCSIG__ in MSVC
}

#define EXPLORE(expr) \
    printf("decltype(" #expr ") is... "); \
    f<decltype(expr)>();
```

# Mutexes are passÃ©

* [Post](http://stryku.pl/poetry/mutexes_are_passe.php)
    - [Reddit](https://www.reddit.com/r/cpp/comments/9dysnl/mutexes_are_pass%C3%A9/)

# Reimplementing NumPy in C++

* [NumCpp](https://github.com/dpilger26/NumCpp)
* [xtensor](https://xtensor.readthedocs.io/en/latest/numpy.html)

## Other linear algebra libraries

* [Blaze](https://bitbucket.org/blaze-lib/blaze)
* [Eigen](https://github.com/eigenteam/eigen-git-mirror)
    * [the official repo](https://bitbucket.org/eigen/eigen)
    * [docs](http://eigen.tuxfamily.org/index.php?title=Main_Page)

# Reboot Your Dreamliner Every 248 Days To Avoid Integer Overflow

* [Article](https://www.i-programmer.info/news/149-security/8548-reboot-your-dreamliner-every-248-days-to-avoid-integer-overflow.html)
    * [Reddit](https://www.reddit.com/r/programming/comments/9ctbvm/reboot_your_dreamliner_every_248_days_to_avoid/)

> This condition is caused by a software counter internal to the Generator Control Units (GCUs) that will overflow after 248 days of continuous power. We are issuing this <directive> to prevent loss of all AC electrical power, which could result in loss of control of the airplane.

# Twitter

![](img/book-use-auto_ptr.png)

# Twitter

![](img/sleep30.png)

# Twitter

![](img/todd.png)
